"use strict";(self.webpackChunkpoker=self.webpackChunkpoker||[]).push([[844],{4844:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var i=n(2982),a=n(4165),r=n(4942),s=n(1413),l=n(5861),c=n(1037),o=n(8391),u=n(2159),d=n(4728),m=n(2603),v=n(7762),h=n(5671),p=n(3144),f=function(){function e(t){(0,h.Z)(this,e),this.el=document.querySelector(t),this.srValue=null,this.fill=null,this.digitCols=null,this.lastDigits="",this.rollDuration=0,this.trans09=!1,this.el&&(this.buildSlider(),this.el.addEventListener("input",this.changeValue.bind(this)),this.el.addEventListener("mousewheel",this.moveSlider.bind(this)))}return(0,p.Z)(e,[{key:"buildSlider",value:function(){var e=document.createElement("div");e.className="range",this.el.parentElement.insertBefore(e,this.el);var t=document.createElement("span");t.className="range__input",e.appendChild(t);var n=document.createElement("span");n.className="range__input-fill",t.appendChild(this.el),t.appendChild(n);var i=document.createElement("span");i.className="range__counter",e.appendChild(i);var a=document.createElement("span");a.className="range__counter-sr",a.textContent="0",i.appendChild(a);var r,s=(0,v.Z)(this.el.max.split(""));try{for(s.s();!(r=s.n()).done;){r.value;var l=document.createElement("span");l.className="range__counter-column",l.setAttribute("aria-hidden","true"),i.appendChild(l);for(var c=0;c<=11;++c){var o=document.createElement("span");o.className="range__counter-digit",c>0&&(o.textContent=11==c?0:"".concat(c-1)),l.appendChild(o)}}}catch(h){s.e(h)}finally{s.f()}for(this.srValue=a,this.fill=n,this.digitCols=i.querySelectorAll(".range__counter-column"),this.lastDigits=this.el.value;this.lastDigits.length<this.digitCols.length;)this.lastDigits=" "+this.lastDigits;this.changeValue();var u=window.getComputedStyle(this.digitCols[0]).getPropertyValue("transition-duration"),d=u.indexOf("ms"),m=u.indexOf("s");d>-1?this.rollDuration=u.substr(0,d):m>-1&&(this.rollDuration=1e3*u.substr(0,m))}},{key:"changeValue",value:function(){var e=this;if(+this.el.value>this.el.max?this.el.value=this.el.max:+this.el.value<this.el.min&&(this.el.value=this.el.min),this.srValue&&(this.srValue.textContent=this.el.value),this.fill){var t=this.el.value/this.el.max,n=100*t,i=1-t;this.fill.style.width="calc(".concat(n,"% + ").concat(i,"em)")}if(this.digitCols){for(var a=this.el.value;a.length<this.digitCols.length;)a=" "+a;var r=[];this.lastDigits&&a.split("").forEach((function(t,n){var i=+t-e.lastDigits[n];r.push(i)})),this.trans09=!1,a.split("").forEach((function(t,n){var i=!1,a=!1,s=" "===t?0:-1.5*(+t+1),l=e.digitCols[n];0==t&&-9==r[n]?(s=-16.5,i=!0):9==t&&9==r[n]&&(s=0,a=!0),l.style.transform="translateY(".concat(s,"em)"),l.firstChild.textContent="",(i||a)&&(e.trans09=!0,a&&(l.firstChild.textContent=t),setTimeout((function(){if(e.trans09){var t="range__counter-column--pause",n=-1.5*(i?1:10);l.classList.add(t),l.style.transform="translateY(".concat(n,"em)"),l.offsetHeight,l.classList.remove(t),a&&(l.firstChild.textContent="")}}),e.rollDuration))})),this.lastDigits=a}}},{key:"moveSlider",value:function(e){var t=this;if(this.fill){this.el.value=e.wheelDelta>0?Number(this.el.value)+50<Number(this.el.max)?Number(this.el.value)+50:Number(this.el.max):Number(this.el.value)-50>=Number(this.el.min)?Number(this.el.value)-50:Number(this.el.min);var n=this.el.value/this.el.max,i=100*n,a=1-n;this.fill.style.width="calc(".concat(i,"% + ").concat(a,"em)")}if(this.digitCols){for(var r=this.el.value;r.length<this.digitCols.length;)r=" "+r;var s=[];this.lastDigits&&r.split("").forEach((function(e,n){var i=+e-t.lastDigits[n];s.push(i)})),this.trans09=!1,r.split("").forEach((function(e,n){var i=!1,a=!1,r=" "===e?0:-1.5*(+e+1),l=t.digitCols[n];0==e&&-9==s[n]?(r=-16.5,i=!0):9==e&&9==s[n]&&(r=0,a=!0),l.style.transform="translateY(".concat(r,"em)"),l.firstChild.textContent="",(i||a)&&(t.trans09=!0,a&&(l.firstChild.textContent=e),setTimeout((function(){if(t.trans09){var e="range__counter-column--pause",n=-1.5*(i?1:10);l.classList.add(e),l.style.transform="translateY(".concat(n,"em)"),l.offsetHeight,l.classList.remove(e),a&&(l.firstChild.textContent="")}}),t.rollDuration))})),this.lastDigits=r}}}]),e}(),g=n(3712),b=function(e){var t=e.value,n=e.setValue,i=e.min,a=void 0===i?"0":i,r=e.max,s=void 0===r?"5000":r,l=e.step,c=void 0===l?"25":l;return o.useEffect((function(){new f("#range2")}),[]),(0,g.jsx)("form",{children:(0,g.jsx)("input",{id:"range2",name:"range2",type:"range",min:a,max:s,value:t,step:c,onChange:function(e){return n(e.target.value)},onWheel:function(e){return n(e.nativeEvent.wheelDelta>0?Number(t)+50<=Number(s)?Number(t)+50:Number(s):Number(t)-50>=Number(a)?Number(t)-50:Number(a))}})})},_=n(2336),x=n(434),A=n(7518),y=n(6165),k=n(1938),j={2:[[0,1,0],[0,0,0,0],[0,0,0],[0,0,0,0],[0,1,0]],3:[[0,1,0],[0,0,0,0],[0,1,0],[0,0,0,0],[0,1,0]],4:[[1,0,1],[0,0,0,0],[0,0,0],[0,0,0,0],[1,0,1]],5:[[1,0,1],[0,0,0,0],[0,1,0],[0,0,0,0],[1,0,1]],6:[[1,0,1],[0,0,0,0],[1,0,1],[0,0,0,0],[1,0,1]],7:[[0,1,0],[1,0,0,1],[0,1,0],[1,0,0,1],[0,1,0]],8:[[0,1,0],[0,1,1,0],[1,0,1],[0,1,1,0],[0,1,0]],9:[[1,1,1],[0,0,0,0],[1,1,1],[0,0,0,0],[1,1,1]],10:[[1,0,1],[1,0,0,1],[1,0,1],[1,0,0,1],[1,0,1]],J:"b",Q:"b",K:"b",A:"b"},Z=function(e){var t=e.cardId,n=(0,o.useMemo)((function(){var e;return null===j||void 0===j?void 0:j[null===(e=k.Z[t])||void 0===e?void 0:e.number]}),[t]),i=(0,o.useMemo)((function(){var e;return null===k.Z||void 0===k.Z||null===(e=k.Z[t])||void 0===e?void 0:e.type}),[t]),a=(0,o.useMemo)((function(){var e;return null===k.Z||void 0===k.Z||null===(e=k.Z[t])||void 0===e?void 0:e.number}),[t]);return t?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"card_item desktop_show",children:[(0,g.jsx)("p",{children:a}),"b"===n?(0,g.jsx)("img",{src:y["".concat(i,"Big")],alt:""}):n.map((function(e,t){return(0,g.jsx)("div",{className:"icons_row",children:null===e||void 0===e?void 0:e.map((function(e,t){return(0,g.jsx)("img",{src:y[e?i:"".concat(i,"Gray")],alt:"",width:"32px",height:"32px"},"card-icon-".concat(i,"-").concat(a,"-").concat(t))}))},"card-row-".concat(i,"-").concat(a,"-").concat(t))})),(0,g.jsx)("p",{children:a})]}),(0,g.jsxs)("div",{className:"card_item desktop_hide",children:[(0,g.jsx)("p",{children:a}),(0,g.jsx)("img",{src:y["".concat(i,"Big")],alt:""}),(0,g.jsx)("p",{children:a})]})]}):(0,g.jsx)("div",{className:"empty_card_item"})},C=n(2343),N=function(e){var t=e.gameCards,n=e.bankCount,i=e.playerDataArr,a=e.playersList,r=e.lastActions,s=e.uuid,l=e.playerCards,c=e.currentPlayerUid,o=e.dealerUid,u=a.reduce((function(e,t){return e.push(i.find((function(e){return e.uid===t}))),e}),[]);return(0,g.jsx)("div",{className:"game_board_wrapper",children:(0,g.jsxs)("div",{className:"game_board_container players_".concat(u.length),children:[u.map((function(e,t){var n,i,a,u,d,m,v,h,p,f,b;return(0,g.jsxs)("div",{className:"player_block player_".concat(t+1),children:[(null===(n=r[e.uid])||void 0===n?void 0:n.action)===x.A.fold?(0,g.jsx)("div",{className:"fold_block",children:"FOLD"}):e.uid===s?(0,g.jsxs)("div",{className:"player_cards",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{children:k.Z[l[e.uid][0]].number}),(0,g.jsx)("img",{src:y[k.Z[l[e.uid][0]].type],alt:""}),(0,g.jsx)("img",{src:y[k.Z[l[e.uid][0]].type],alt:""})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{children:k.Z[l[e.uid][1]].number}),(0,g.jsx)("img",{src:y[k.Z[l[e.uid][1]].type],alt:""}),(0,g.jsx)("img",{src:y[k.Z[l[e.uid][1]].type],alt:""})]})]}):(0,g.jsxs)("div",{className:"hidden_player_cards",children:[(0,g.jsx)("div",{}),(0,g.jsx)("div",{})]}),(0,g.jsxs)("div",{className:["player_info",e.uid===c&&"current_player"].filter(Boolean).join(" "),children:[(0,g.jsxs)("div",{className:"player_text_info",children:[(0,g.jsx)("div",{className:"username_block",children:(0,g.jsx)("p",{children:e.uid===s?"You":e.username})}),(0,g.jsxs)("div",{className:"money_block",children:[(0,g.jsx)("p",{children:e.money}),e.uid===o&&(0,g.jsx)("div",{className:"dealer_block",children:"D"})]}),(0,g.jsx)("img",{src:C.Z[e.icon_index],alt:"",width:"52px",height:"52px"})]}),(null===(i=r[e.uid])||void 0===i?void 0:i.action)===x.A.small_blind&&(0,g.jsx)("div",{className:"player_action_block",children:"Small Blind"}),(null===(a=r[e.uid])||void 0===a?void 0:a.action)===x.A.big_blind&&(0,g.jsx)("div",{className:"player_action_block",children:"Big Blind"}),(null===(u=r[e.uid])||void 0===u?void 0:u.action)===x.A.call&&(0,g.jsx)("div",{className:"player_action_block",children:"Call"}),(null===(d=r[e.uid])||void 0===d?void 0:d.action)===x.A.check&&(0,g.jsx)("div",{className:"player_action_block",children:"Check"}),(null===(m=r[e.uid])||void 0===m?void 0:m.action)===x.A.bet&&(0,g.jsxs)("div",{className:"player_action_block",children:["Bet ",null===(v=r[e.uid])||void 0===v?void 0:v.number]}),(null===(h=r[e.uid])||void 0===h?void 0:h.action)===x.A.raise&&(0,g.jsxs)("div",{className:"player_action_block",children:["Raise to ",null===(p=r[e.uid])||void 0===p?void 0:p.number]}),(null===(f=r[e.uid])||void 0===f?void 0:f.action)===x.A.all_in&&(0,g.jsxs)("div",{className:"player_action_block",children:["All in ",null===(b=r[e.uid])||void 0===b?void 0:b.number]})]})]},e.uid)})),(0,g.jsxs)("div",{className:"bank_block",children:[(0,g.jsx)("img",{src:"data:image/png;base64,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",width:"50px",height:"50px",alt:""}),(0,g.jsx)("p",{children:n||0})]}),(0,g.jsxs)("div",{className:"cards",children:[(0,g.jsx)(Z,{cardId:t[0]}),(0,g.jsx)(Z,{cardId:t[1]}),(0,g.jsx)(Z,{cardId:t[2]}),(0,g.jsx)(Z,{cardId:t[3]}),(0,g.jsx)(Z,{cardId:t[4]})]})]})})},S=(0,o.lazy)((function(){return n.e(490).then(n.bind(n,5490))})),w=function(e){e.midgamePlayerUid;var t,n,v=e.playerDataArr,h=e.playerCards,p=e.cardDeck,f=e.currentPlayerUid,y=e.playersList,k=e.uuid,j=e.id,Z=(e.setOpenMenu,e.dealerUid),C=e.lastActions,w=e.gameCards,D=e.bankCount,U=e.withBackgroundAnimation,B=e.gameStage,L=e.isHost,E=e.currentBet,W=void 0===E?0:E,I=e.allInBanks,V=e.setIsFinishModalOpen,K=e.lastStreetBank,M=void 0===K?0:K,R=(0,o.useState)(!1),H=(0,c.Z)(R,2),O=H[0],T=H[1],P=o.useState(W+50),F=(0,c.Z)(P,2),G=F[0],X=F[1],J=(0,o.useMemo)((function(){var e;return(null===(e=v.find((function(e){return e.uid===k})))||void 0===e?void 0:e.money)||0}),[v,k]),Y=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=y.filter((function(e){var t;return(null===(t=C[e])||void 0===t?void 0:t.action)!==x.A.fold}))).length-1)){e.next=7;break}return n=t.filter((function(e){return e!==k}))[0],e.next=5,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(j)),{ongoing_game:!1,midgame_player_uid:[],card_deck:[],player_cards:{},players_list:[],last_actions:{},game_stage:A.H.start,game_cards:[],bank:0,current_bet:0,all_in_banks:{},current_player_uid:n,player_data_arr:v.map((function(e){return e.uid===n?(0,s.Z)((0,s.Z)({},e),{},{money:e.money+D,points:e.points+1}):e})),history_list:u.vr.apply(void 0,[{message:x.A.fold,uid:k,gameStage:B},{message:"Winner",uid:n,gameStage:B}])});case 5:e.next=10;break;case 7:return i=(0,_.uU)(t,k),e.next=10,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(j)),{current_player_uid:i,last_actions:(0,s.Z)((0,s.Z)({},C),{},(0,r.Z)({},k,{action:x.A.fold})),history_list:(0,u.vr)({message:x.A.fold,uid:k,gameStage:B})});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=(0,o.useMemo)((function(){var e;return((null===(e=C[k])||void 0===e?void 0:e.number)||0)+v.find((function(e){return e.uid===k})).money<=W}),[v,k,W]),Q=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,_.uU)(y.filter((function(e){var t;return(null===(t=C[e])||void 0===t?void 0:t.action)!==x.A.fold})),k),i=(null===(t=C[k])||void 0===t?void 0:t.number)||0,e.next=4,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(j)),(0,s.Z)((0,s.Z)({current_player_uid:n,last_actions:(0,s.Z)((0,s.Z)({},C),{},(0,r.Z)({},k,{action:z?x.A.all_in:0===W?x.A.check:x.A.call,number:z?i+J:W,end:!0})),bank:z?D+J:D+W-i,player_data_arr:v.map((function(e){return e.uid===k?(0,s.Z)((0,s.Z)({},e),{},{money:z?0:e.money+i-W}):e}))},z?{all_in_banks:(0,s.Z)((0,s.Z)({},I),{},(0,r.Z)({},k,{bank:M+i+J}))}:{}),{},{history_list:(0,u.vr)((0,s.Z)({message:z?x.A.all_in:0===W?x.A.check:x.A.call,uid:k,gameStage:B},z?{number:i+J}:{}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,n,i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,_.uU)(y.filter((function(e){var t;return(null===(t=C[e])||void 0===t?void 0:t.action)!==x.A.fold})),k),i=(null===(t=C[k])||void 0===t?void 0:t.number)||0,l=Number(J)+i===Number(G),e.next=5,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(j)),(0,s.Z)((0,s.Z)({current_player_uid:n,last_actions:(0,s.Z)((0,s.Z)({},Object.keys(C).reduce((function(e,t){return C[t].action===x.A.fold||C[t].action===x.A.all_in?e[t]=C[t]:e[t]=(0,s.Z)((0,s.Z)({},C[t]),{},{end:!1}),e}),{})),{},(0,r.Z)({},k,{action:l?x.A.all_in:0===W?x.A.bet:x.A.raise,number:Number(G),end:!0})),current_bet:W>=Number(G)?W:Number(G),bank:l?D+J:D+Number(G)-i,player_data_arr:v.map((function(e){return e.uid===k?(0,s.Z)((0,s.Z)({},e),{},{money:l?0:e.money+i-Number(G)}):e}))},l?{all_in_banks:(0,s.Z)((0,s.Z)({},I),{},(0,r.Z)({},k,{bank:D+J}))}:{}),{},{history_list:(0,u.vr)({message:l?x.A.all_in:0===W?x.A.bet:x.A.raise,number:l?i+J:Number(G),uid:k,gameStage:B})}));case 5:T(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,_.uU)(y.filter((function(e){var t;return(null===(t=C[e])||void 0===t?void 0:t.action)!==x.A.fold})),k),i=(null===(t=C[k])||void 0===t?void 0:t.number)||0,e.next=4,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(j)),{current_player_uid:n,last_actions:(0,s.Z)((0,s.Z)({},Object.keys(C).reduce((function(e,t){return C[t].action===x.A.fold||C[t].action===x.A.all_in?e[t]=C[t]:e[t]=(0,s.Z)((0,s.Z)({},C[t]),{},{end:!1}),e}),{})),{},(0,r.Z)({},k,{action:x.A.all_in,number:Number(J),end:!0})),current_bet:i+Number(J),bank:D+Number(J),player_data_arr:v.map((function(e){return e.uid===k?(0,s.Z)((0,s.Z)({},e),{},{money:0}):e})),all_in_banks:(0,s.Z)((0,s.Z)({},I),{},(0,r.Z)({},k,{bank:D+Number(J)})),history_list:(0,u.vr)({message:x.A.all_in,number:i+Number(J),uid:k,gameStage:B})});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=(0,o.useMemo)((function(){return(0,_.tI)({lastActions:C,playersList:y})}),[C,y]),te=(0,o.useCallback)((0,l.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=B,e.next=e.t0===A.H.start?3:e.t0===A.H.flop?6:e.t0===A.H.turn?9:e.t0===A.H.river?12:14;break;case 3:return e.next=5,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(j)),{last_actions:Object.keys(C).reduce((function(e,t){var n,i;return(null===(n=C[t])||void 0===n?void 0:n.action)!==x.A.fold&&(null===(i=C[t])||void 0===i?void 0:i.action)!==x.A.all_in||(e[t]=C[t]),e}),{}),current_bet:0,game_stage:A.H.flop,game_cards:(0,_.XW)({gameStage:B,cardDeck:p}),history_list:(0,u.vr)({uid:k,cards:(0,_.XW)({gameStage:B,cardDeck:p})}),card_deck:p.slice(4),last_street_bank:D});case 5:case 8:case 11:case 14:return e.abrupt("break",15);case 6:return e.next=8,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(j)),{last_actions:Object.keys(C).reduce((function(e,t){var n,i;return(null===(n=C[t])||void 0===n?void 0:n.action)!==x.A.fold&&(null===(i=C[t])||void 0===i?void 0:i.action)!==x.A.all_in||(e[t]=C[t]),e}),{}),current_bet:0,game_stage:A.H.turn,game_cards:u.vr.apply(void 0,(0,i.Z)((0,_.XW)({gameStage:B,cardDeck:p}))),history_list:(0,u.vr)({uid:k,cards:(0,_.XW)({gameStage:B,cardDeck:p})}),card_deck:p.slice(2),last_street_bank:D});case 9:return e.next=11,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(j)),{last_actions:Object.keys(C).reduce((function(e,t){var n,i;return(null===(n=C[t])||void 0===n?void 0:n.action)!==x.A.fold&&(null===(i=C[t])||void 0===i?void 0:i.action)!==x.A.all_in||(e[t]=C[t]),e}),{}),current_bet:0,game_stage:A.H.river,game_cards:u.vr.apply(void 0,(0,i.Z)((0,_.XW)({gameStage:B,cardDeck:p}))),history_list:(0,u.vr)({uid:k,cards:(0,_.XW)({gameStage:B,cardDeck:p})}),card_deck:p.slice(2),last_street_bank:D});case 12:return V(!0),e.abrupt("break",15);case 15:case"end":return e.stop()}}),e)}))),[p,B,j,C,V]),ne=(0,o.useMemo)((function(){return(0,_.Kn)({lastActions:C,playersList:y})}),[C,y]);return(0,o.useEffect)((function(){var e;return L?ne?e=setTimeout((function(){return te()}),4e3):ee&&te():(ne&&B===A.H.river&&(e=setTimeout((function(){return V(!0)}),4e3)),ee&&B===A.H.river&&V(!0)),function(){return clearTimeout(e)}}),[B,L,ee,te,V]),(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"game_block",children:[(0,g.jsx)(N,{gameCards:w,bankCount:D,playerDataArr:v,playersList:y,lastActions:C,uuid:k,playerCards:h,currentPlayerUid:f,dealerUid:Z}),f!==k||5===w.length&&(0,_.tI)({lastActions:C,playersList:y})||ne?null:O?(0,g.jsxs)("div",{className:"range_block_wrapper",children:[(0,g.jsx)("button",{onClick:function(){T(!1)},children:"Back"}),(0,g.jsx)("div",{className:"range_block",children:(0,g.jsx)(b,{min:W+50,max:((null===(t=C[k])||void 0===t?void 0:t.number)||0)+J,step:"50",value:G,setValue:X})}),(0,g.jsx)("button",{onClick:q,children:((null===(n=C[k])||void 0===n?void 0:n.number)||0)+J===Number(G)?"All in":0===W?"Bet":"Raise"})]}):(0,g.jsxs)("div",{className:"game_buttons_block",children:[(0,g.jsx)(m.Z,{text:"Fold",onClick:Y}),(0,g.jsx)(m.Z,{text:0===W?"Check":z?"All in":"Call",onClick:Q}),!z&&(Number(W)+50===Number(J)?(0,g.jsx)(m.Z,{text:"All in",onClick:$}):(0,g.jsx)(m.Z,{text:0===W?"Bet":"Raise",onClick:function(){T(!0)}}))]}),U&&(0,g.jsx)(o.Suspense,{children:(0,g.jsx)(S,{})})]})})}}}]);