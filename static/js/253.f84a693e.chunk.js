"use strict";(self.webpackChunkpoker=self.webpackChunkpoker||[]).push([[253],{6253:function(r,e,n){n.r(e),n.d(e,{default:function(){return m}});var t=n(4165),a=n(5861),i=n(8391),c=n(2159),o=n(99),s=n(4728),u=n(2343),d=n(7141),l=n(2336),p=n(3712),f=function(r){var e=r.imgSrc,n=r.username,i=r.itsI,o=r.isCurrentPlayer,u=r.isHost,d=r.isStartBlock,l=r.handleKick,f=r.dealerUid,m=r.playerUid,k=r.id,_=function(){var r=(0,a.Z)((0,t.Z)().mark((function r(){return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(m===f||!u){r.next=3;break}return r.next=3,(0,c.r7)((0,c.JU)(s.db,"game_rooms_poker/".concat(k)),{dealer_uid:m});case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return(0,p.jsxs)("div",{className:"user_block ".concat(i?"itsI":""," ").concat(o?"is_current_player":""),children:[(0,p.jsx)("p",{children:n}),(0,p.jsx)("img",{src:e,alt:"",width:"65px",height:"65px",loading:"lazy"}),u&&(0,p.jsx)("div",{className:"dealer_block ".concat(m===f?"current":""," ").concat(u?"is_host":""),onClick:_,children:"D"}),u&&d&&!i&&(0,p.jsx)("button",{onClick:l,children:"X"})]})},m=function(r){var e=r.isHost,n=r.playerDataArr,m=r.uuid,k=r.id,_=r.dealerUid,h=(0,o.s0)(),x=(0,i.useContext)(d.u).setToast,b=function(){var r=(0,a.Z)((0,t.Z)().mark((function r(){return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,c.r7)((0,c.JU)(s.db,"game_rooms_poker",k),{game_room_closed:!0});case 2:return r.next=4,(0,c.oe)((0,c.JU)(s.db,"game_rooms_poker",k));case 4:return r.next=6,(0,c.r7)((0,c.JU)(s.db,"game_room_codes_poker","code_array"),{codes:(0,c.Ab)(k)});case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),v=function(){var r=(0,a.Z)((0,t.Z)().mark((function r(e){return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,c.r7)((0,c.JU)(s.db,"game_rooms_poker",k),{banned_player_uid:(0,c.vr)(e),player_data_arr:n.filter((function(r){return r.uid!==e}))});case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),y=function(){var r=(0,a.Z)((0,t.Z)().mark((function r(){var e,a,i;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=n.find((function(r){return r.uid===m})),a=n.map((function(r){return r.uid})),i=(0,l.uU)(a,_),(0,c.r7)((0,c.JU)(s.db,"game_rooms_poker",k),{player_data_arr:(0,c.Ab)(e),dealer_uid:e.uid===m?i:_}),h("/");case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return(0,p.jsxs)("div",{className:"start_block",children:[(0,p.jsx)("div",{className:"player_block",children:null===n||void 0===n?void 0:n.map((function(r){return(0,p.jsx)(f,{imgSrc:u.Z[r.icon_index],username:r.username,itsI:m===r.uid,isHost:e,handleKick:function(){return v(r.uid)},isStartBlock:!0,dealerUid:_,playerUid:r.uid,id:k},r.uid)}))}),e?(0,p.jsxs)("div",{className:"btn-block",children:[(0,p.jsx)("button",{onClick:b,children:"Delete Room"}),(0,p.jsx)("button",{onClick:function(){(null===n||void 0===n?void 0:n.length)>=2?(0,l.t)({playerDataArr:n,id:k,dealerUid:_}):x({type:"danger",text:"At least 2 players are required"})},children:"Start Game"})]}):(0,p.jsx)("div",{className:"btn-block",children:(0,p.jsx)("button",{onClick:y,children:"Leave"})})]})}}}]);