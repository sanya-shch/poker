"use strict";(self.webpackChunkpoker=self.webpackChunkpoker||[]).push([[844],{4844:function(e,t,i){i.r(t),i.d(t,{default:function(){return w}});var n=i(2982),a=i(4165),r=i(4942),l=i(1413),s=i(5861),c=i(1037),o=i(8391),u=i(2159),d=i(4728),m=i(2603),v=i(7762),h=i(5671),p=i(3144),f=function(){function e(t,i,n){(0,h.Z)(this,e),this.el=document.querySelector(t),this.step=i,this.addedMax=n,this.srValue=null,this.fill=null,this.digitCols=null,this.lastDigits="",this.rollDuration=0,this.trans09=!1,this.el&&(this.buildSlider(),this.el.addEventListener("input",this.changeValue.bind(this)))}return(0,p.Z)(e,[{key:"buildSlider",value:function(){var e=document.createElement("div");e.className="range",this.el.parentElement.insertBefore(e,this.el);var t=document.createElement("span");t.className="range__input",e.appendChild(t);var i=document.createElement("span");i.className="range__input-fill",t.appendChild(this.el),t.appendChild(i);var n=document.createElement("span");n.className="range__counter",e.appendChild(n);var a=document.createElement("span");a.className="range__counter-sr",a.textContent="0",n.appendChild(a);var r,l=(0,v.Z)(this.el.max.split(""));try{for(l.s();!(r=l.n()).done;){r.value;var s=document.createElement("span");s.className="range__counter-column",s.setAttribute("aria-hidden","true"),n.appendChild(s);for(var c=0;c<=11;++c){var o=document.createElement("span");o.className="range__counter-digit",c>0&&(o.textContent=11==c?0:"".concat(c-1)),s.appendChild(o)}}}catch(h){l.e(h)}finally{l.f()}for(this.srValue=a,this.fill=i,this.digitCols=n.querySelectorAll(".range__counter-column"),this.lastDigits=this.el.value;this.lastDigits.length<this.digitCols.length;)this.lastDigits=" "+this.lastDigits;this.changeValue();var u=window.getComputedStyle(this.digitCols[0]).getPropertyValue("transition-duration"),d=u.indexOf("ms"),m=u.indexOf("s");d>-1?this.rollDuration=u.substr(0,d):m>-1&&(this.rollDuration=1e3*u.substr(0,m))}},{key:"changeValue",value:function(){var e=this;if(+this.el.value>+this.el.max?this.el.value=this.el.max:+this.el.value<this.el.min&&(this.el.value=this.el.min),this.srValue&&(this.srValue.textContent=this.el.value),this.fill){var t=this.el.value/this.el.max,i=100*t,n=1-t;this.fill.style.width="calc(".concat(i,"% + ").concat(n,"em)")}if(this.digitCols){for(var a=+this.el.value===+this.el.max?String(+this.el.value-this.addedMax):this.el.value;a.length<this.digitCols.length;)a=" "+a;var r=[];this.lastDigits&&a.split("").forEach((function(t,i){var n=+t-e.lastDigits[i];r.push(n)})),this.trans09=!1,a.split("").forEach((function(t,i){var n=!1,a=!1,l=" "===t?0:-1.5*(+t+1),s=e.digitCols[i];0==t&&-9==r[i]?(l=-16.5,n=!0):9==t&&9==r[i]&&(l=0,a=!0),s.style.transform="translateY(".concat(l,"em)"),s.firstChild.textContent="",(n||a)&&(e.trans09=!0,a&&(s.firstChild.textContent=t),setTimeout((function(){if(e.trans09){var t="range__counter-column--pause",i=-1.5*(n?1:10);s.classList.add(t),s.style.transform="translateY(".concat(i,"em)"),s.offsetHeight,s.classList.remove(t),a&&(s.firstChild.textContent="")}}),e.rollDuration))})),this.lastDigits=a}}},{key:"moveSlider",value:function(e){var t=this;if(this.fill){this.el.value=e.wheelDelta>0?Number(this.el.value)+this.step<Number(this.el.max)?Number(this.el.value)+this.step:Number(this.el.max):Number(this.el.value)-this.step>=Number(this.el.min)?Number(this.el.value)-this.step:Number(this.el.min);var i=this.el.value/this.el.max,n=100*i,a=1-i;this.fill.style.width="calc(".concat(n,"% + ").concat(a,"em)")}if(this.digitCols){for(var r=+this.el.value===+this.el.max?String(+this.el.value-this.addedMax):this.el.value;r.length<this.digitCols.length;)r=" "+r;var l=[];this.lastDigits&&r.split("").forEach((function(e,i){var n=+e-t.lastDigits[i];l.push(n)})),this.trans09=!1,r.split("").forEach((function(e,i){var n=!1,a=!1,r=" "===e?0:-1.5*(+e+1),s=t.digitCols[i];0==e&&-9==l[i]?(r=-16.5,n=!0):9==e&&9==l[i]&&(r=0,a=!0),s.style.transform="translateY(".concat(r,"em)"),s.firstChild.textContent="",(n||a)&&(t.trans09=!0,a&&(s.firstChild.textContent=e),setTimeout((function(){if(t.trans09){var e="range__counter-column--pause",i=-1.5*(n?1:10);s.classList.add(e),s.style.transform="translateY(".concat(i,"em)"),s.offsetHeight,s.classList.remove(e),a&&(s.firstChild.textContent="")}}),t.rollDuration))})),this.lastDigits=r}}}]),e}(),g=i(3712),_=function(e){var t=e.value,i=e.setValue,n=e.min,a=void 0===n?"0":n,r=e.max,l=void 0===r?"5000":r,s=e.step,u=e.addedMax,d=void 0===u?0:u,m=o.useState(t),v=(0,c.Z)(m,2),h=v[0],p=v[1];return o.useEffect((function(){new f("#range2",s,d)}),[d]),(0,g.jsx)("form",{children:(0,g.jsx)("input",{id:"range2",name:"range2",type:"range",min:a,max:l+d,value:h,step:s,onChange:function(e){return p(e.target.value)},onPointerUp:function(){return i(h>=l?l:h)}})})},b=i(9277),x=i(434),A=i(7518),y=i(6165),k=i(1938),j={2:[[0,1,0],[0,0,0,0],[0,0,0],[0,0,0,0],[0,1,0]],3:[[0,1,0],[0,0,0,0],[0,1,0],[0,0,0,0],[0,1,0]],4:[[1,0,1],[0,0,0,0],[0,0,0],[0,0,0,0],[1,0,1]],5:[[1,0,1],[0,0,0,0],[0,1,0],[0,0,0,0],[1,0,1]],6:[[1,0,1],[0,0,0,0],[1,0,1],[0,0,0,0],[1,0,1]],7:[[0,1,0],[1,0,0,1],[0,1,0],[1,0,0,1],[0,1,0]],8:[[0,1,0],[0,1,1,0],[1,0,1],[0,1,1,0],[0,1,0]],9:[[1,1,1],[0,0,0,0],[1,1,1],[0,0,0,0],[1,1,1]],10:[[1,0,1],[0,1,1,0],[1,0,1],[0,1,1,0],[1,0,1]],J:"b",Q:"b",K:"b",A:"b"},C=function(e){var t=e.cardId,i=(0,o.useMemo)((function(){var e;return null===j||void 0===j?void 0:j[null===(e=k.Z[t])||void 0===e?void 0:e.number]}),[t]),n=(0,o.useMemo)((function(){var e;return null===k.Z||void 0===k.Z||null===(e=k.Z[t])||void 0===e?void 0:e.type}),[t]),a=(0,o.useMemo)((function(){var e;return null===k.Z||void 0===k.Z||null===(e=k.Z[t])||void 0===e?void 0:e.number}),[t]);return t?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"card_item desktop_show",children:[(0,g.jsx)("p",{children:a}),"b"===i?(0,g.jsx)("img",{src:y["".concat(n,"Big")],alt:""}):i.map((function(e,t){return(0,g.jsx)("div",{className:"icons_row",children:null===e||void 0===e?void 0:e.map((function(e,t){return(0,g.jsx)("img",{src:y[e?n:"".concat(n,"Gray")],alt:"",width:"32px",height:"32px"},"card-icon-".concat(n,"-").concat(a,"-").concat(t))}))},"card-row-".concat(n,"-").concat(a,"-").concat(t))})),(0,g.jsx)("p",{children:a})]}),(0,g.jsxs)("div",{className:"card_item desktop_hide",children:[(0,g.jsx)("p",{children:a}),(0,g.jsx)("img",{src:y["".concat(n,"Big")],alt:""}),(0,g.jsx)("p",{children:a})]})]}):(0,g.jsx)("div",{className:"empty_card_item"})},Z=i(2343),N=function(e){var t=e.gameCards,i=e.bankCount,n=e.playerDataArr,a=e.playersList,r=e.lastActions,l=e.uuid,s=e.playerCards,c=e.currentPlayerUid,o=e.dealerUid,u=a.reduce((function(e,t){return e.push(n.find((function(e){return e.uid===t}))),e}),[]);return(0,g.jsx)("div",{className:"game_board_wrapper",children:(0,g.jsxs)("div",{className:"game_board_container players_".concat(u.length),children:[u.map((function(e,t){var i,n,a,u,d,m,v,h,p,f,_;return(0,g.jsxs)("div",{className:"player_block player_".concat(t+1),children:[(null===(i=r[e.uid])||void 0===i?void 0:i.action)===x.A.fold?(0,g.jsx)("div",{className:"fold_block",children:"FOLD"}):e.uid===l?(0,g.jsxs)("div",{className:"player_cards",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{children:k.Z[s[e.uid][0]].number}),(0,g.jsx)("img",{src:y[k.Z[s[e.uid][0]].type],alt:""})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{children:k.Z[s[e.uid][1]].number}),(0,g.jsx)("img",{src:y[k.Z[s[e.uid][1]].type],alt:""})]})]}):(0,g.jsxs)("div",{className:"hidden_player_cards",children:[(0,g.jsx)("div",{}),(0,g.jsx)("div",{})]}),(0,g.jsxs)("div",{className:["player_info",e.uid===c&&"current_player"].filter(Boolean).join(" "),children:[(0,g.jsxs)("div",{className:"player_text_info",children:[(0,g.jsx)("div",{className:"username_block",children:(0,g.jsx)("p",{children:e.uid===l?(0,g.jsxs)(g.Fragment,{children:["You",(0,g.jsxs)("span",{children:["- ",e.username]})]}):e.username})}),(0,g.jsxs)("div",{className:"money_block",children:[(0,g.jsx)("p",{children:e.money}),e.uid===o&&(0,g.jsx)("div",{className:"dealer_block",children:(0,g.jsx)("p",{children:"D"})})]}),(0,g.jsx)("img",{src:Z.Z[e.icon_index],alt:"",width:"52px",height:"52px"})]}),(null===(n=r[e.uid])||void 0===n?void 0:n.action)===x.A.small_blind&&(0,g.jsx)("div",{className:"player_action_block",children:"Small Blind"}),(null===(a=r[e.uid])||void 0===a?void 0:a.action)===x.A.big_blind&&(0,g.jsx)("div",{className:"player_action_block",children:"Big Blind"}),(null===(u=r[e.uid])||void 0===u?void 0:u.action)===x.A.call&&(0,g.jsx)("div",{className:"player_action_block",children:"Call"}),(null===(d=r[e.uid])||void 0===d?void 0:d.action)===x.A.check&&(0,g.jsx)("div",{className:"player_action_block",children:"Check"}),(null===(m=r[e.uid])||void 0===m?void 0:m.action)===x.A.bet&&(0,g.jsxs)("div",{className:"player_action_block",children:["Bet ",null===(v=r[e.uid])||void 0===v?void 0:v.number]}),(null===(h=r[e.uid])||void 0===h?void 0:h.action)===x.A.raise&&(0,g.jsxs)("div",{className:"player_action_block",children:["Raise to ",null===(p=r[e.uid])||void 0===p?void 0:p.number]}),(null===(f=r[e.uid])||void 0===f?void 0:f.action)===x.A.all_in&&(0,g.jsxs)("div",{className:"player_action_block",children:["All in ",null===(_=r[e.uid])||void 0===_?void 0:_.number]})]})]},e.uid)})),(0,g.jsxs)("div",{className:"bank_block",children:[(0,g.jsx)("img",{src:"data:image/png;base64,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",width:"50px",height:"50px",alt:""}),(0,g.jsx)("p",{children:i||0})]}),(0,g.jsxs)("div",{className:"cards",children:[(0,g.jsx)(C,{cardId:t[0]}),(0,g.jsx)(C,{cardId:t[1]}),(0,g.jsx)(C,{cardId:t[2]}),(0,g.jsx)(C,{cardId:t[3]}),(0,g.jsx)(C,{cardId:t[4]})]})]})})},S=(0,o.lazy)((function(){return i.e(490).then(i.bind(i,5490))})),w=function(e){var t,i,v,h,p,f=e.playerDataArr,y=e.playerCards,k=e.cardDeck,j=e.currentPlayerUid,C=e.playersList,Z=e.uuid,w=e.id,D=e.dealerUid,U=e.lastActions,B=e.gameCards,L=e.bankCount,E=e.withBackgroundAnimation,M=e.bigBlind,I=e.gameStage,W=e.isHost,V=e.currentBet,K=void 0===V?0:V,R=e.allInBanks,H=e.setIsFinishModalOpen,O=e.lastStreetBank,T=void 0===O?0:O,F=(0,o.useState)(!1),P=(0,c.Z)(F,2),G=P[0],X=P[1],J=(0,o.useState)(K+M),Y=(0,c.Z)(J,2),z=Y[0],Q=Y[1],q=(0,o.useMemo)((function(){var e;return(null===(e=f.find((function(e){return e.uid===Z})))||void 0===e?void 0:e.money)||0}),[f,Z]),$=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,i,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==(t=C.filter((function(e){var t;return(null===(t=U[e])||void 0===t?void 0:t.action)!==x.A.fold}))).length){e.next=7;break}return i=t.filter((function(e){return e!==Z}))[0],e.next=5,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(w)),{ongoing_game:!1,midgame_player_uid:[],card_deck:[],player_cards:{},players_list:[],last_actions:{},game_stage:A.H.start,game_cards:[],bank:0,current_bet:0,all_in_banks:{},current_player_uid:i,player_data_arr:f.map((function(e){return e.uid===i?(0,l.Z)((0,l.Z)({},e),{},{money:e.money+L,points:e.points+1}):e})),history_list:u.vr.apply(void 0,[{message:x.A.fold,uid:Z,gameStage:I},{message:"Winner",uid:i,gameStage:I}])});case 5:e.next=10;break;case 7:return n=(0,b.uU)(t,Z),e.next=10,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(w)),{current_player_uid:n,last_actions:(0,l.Z)((0,l.Z)({},U),{},(0,r.Z)({},Z,{action:x.A.fold})),history_list:(0,u.vr)({message:x.A.fold,uid:Z,gameStage:I})});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=(0,o.useMemo)((function(){var e,t;return((null===(e=U[Z])||void 0===e?void 0:e.number)||0)+(null===(t=f.find((function(e){return e.uid===Z})))||void 0===t?void 0:t.money)<=K}),[f,Z,K]),te=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,i,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,b.uU)(C.filter((function(e){var t,i;return!((null===(t=U[e])||void 0===t?void 0:t.action)===x.A.fold||(null===(i=U[e])||void 0===i?void 0:i.action)===x.A.all_in)})),Z),n=(null===(t=U[Z])||void 0===t?void 0:t.number)||0,e.next=4,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(w)),(0,l.Z)((0,l.Z)({current_player_uid:i,last_actions:(0,l.Z)((0,l.Z)({},U),{},(0,r.Z)({},Z,{action:ee?x.A.all_in:0===K?x.A.check:x.A.call,number:ee?n+q:K,end:!0})),bank:ee?L+q:L+K-n,player_data_arr:f.map((function(e){return e.uid===Z?(0,l.Z)((0,l.Z)({},e),{},{money:ee?0:e.money+n-K}):e}))},ee?{all_in_banks:(0,l.Z)((0,l.Z)({},R),{},(0,r.Z)({},Z,{bank:T+n+q}))}:{}),{},{history_list:(0,u.vr)((0,l.Z)({message:ee?x.A.all_in:0===K?x.A.check:x.A.call,uid:Z,gameStage:I},ee?{number:n+q}:{}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,i,n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,b.uU)(C.filter((function(e){var t,i;return!((null===(t=U[e])||void 0===t?void 0:t.action)===x.A.fold||(null===(i=U[e])||void 0===i?void 0:i.action)===x.A.all_in)})),Z),n=(null===(t=U[Z])||void 0===t?void 0:t.number)||0,s=Number(q)+n===Number(z),e.next=5,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(w)),(0,l.Z)((0,l.Z)({current_player_uid:i,last_actions:(0,l.Z)((0,l.Z)({},Object.keys(U).reduce((function(e,t){return U[t].action===x.A.fold||U[t].action===x.A.all_in?e[t]=U[t]:e[t]=(0,l.Z)((0,l.Z)({},U[t]),{},{end:!1}),e}),{})),{},(0,r.Z)({},Z,{action:s?x.A.all_in:0===K?x.A.bet:x.A.raise,number:Number(z),end:!0})),current_bet:K>=Number(z)?K:Number(z),bank:s?L+q:L+Number(z)-n,player_data_arr:f.map((function(e){return e.uid===Z?(0,l.Z)((0,l.Z)({},e),{},{money:s?0:e.money+n-Number(z)}):e}))},s?{all_in_banks:(0,l.Z)((0,l.Z)({},R),{},(0,r.Z)({},Z,{bank:L+q}))}:{}),{},{history_list:(0,u.vr)({message:s?x.A.all_in:0===K?x.A.bet:x.A.raise,number:s?n+q:Number(z),uid:Z,gameStage:I})}));case 5:X(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,i,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,b.uU)(C.filter((function(e){var t,i;return!((null===(t=U[e])||void 0===t?void 0:t.action)===x.A.fold||(null===(i=U[e])||void 0===i?void 0:i.action)===x.A.all_in)})),Z),n=(null===(t=U[Z])||void 0===t?void 0:t.number)||0,e.next=4,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(w)),{current_player_uid:i,last_actions:(0,l.Z)((0,l.Z)({},Object.keys(U).reduce((function(e,t){return U[t].action===x.A.fold||U[t].action===x.A.all_in?e[t]=U[t]:e[t]=(0,l.Z)((0,l.Z)({},U[t]),{},{end:!1}),e}),{})),{},(0,r.Z)({},Z,{action:x.A.all_in,number:Number(q),end:!0})),current_bet:n+Number(q),bank:L+Number(q),player_data_arr:f.map((function(e){return e.uid===Z?(0,l.Z)((0,l.Z)({},e),{},{money:0}):e})),all_in_banks:(0,l.Z)((0,l.Z)({},R),{},(0,r.Z)({},Z,{bank:L+Number(q)})),history_list:(0,u.vr)({message:x.A.all_in,number:n+Number(q),uid:Z,gameStage:I})});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=(0,o.useMemo)((function(){return(0,b.tI)({lastActions:U,playersList:C})}),[U,C]),re=(0,o.useCallback)((0,s.Z)((0,a.Z)().mark((function e(){var t,i,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=C.filter((function(e){var t,i;return!((null===(t=U[e])||void 0===t?void 0:t.action)===x.A.fold||(null===(i=U[e])||void 0===i?void 0:i.action)===x.A.all_in)})),i=1===t.length&&U[t[0]].end,r=(0,b.uU)(t,Z),e.t0=I,e.next=e.t0===A.H.start?6:e.t0===A.H.flop?9:e.t0===A.H.turn?12:e.t0===A.H.river?15:17;break;case 6:return e.next=8,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(w)),{current_player_uid:r,last_actions:Object.keys(U).reduce((function(e,t){var n,a;return((null===(n=U[t])||void 0===n?void 0:n.action)===x.A.fold||(null===(a=U[t])||void 0===a?void 0:a.action)===x.A.all_in||i)&&(e[t]=U[t]),e}),{}),current_bet:0,game_stage:A.H.flop,game_cards:(0,b.XW)({gameStage:I,cardDeck:k}),history_list:(0,u.vr)({uid:Z,cards:(0,b.XW)({gameStage:I,cardDeck:k})}),card_deck:k.slice(4),last_street_bank:L});case 8:case 11:case 14:case 17:return e.abrupt("break",18);case 9:return e.next=11,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(w)),{current_player_uid:r,last_actions:Object.keys(U).reduce((function(e,t){var n,a;return((null===(n=U[t])||void 0===n?void 0:n.action)===x.A.fold||(null===(a=U[t])||void 0===a?void 0:a.action)===x.A.all_in||i)&&(e[t]=U[t]),e}),{}),current_bet:0,game_stage:A.H.turn,game_cards:u.vr.apply(void 0,(0,n.Z)((0,b.XW)({gameStage:I,cardDeck:k}))),history_list:(0,u.vr)({uid:Z,cards:(0,b.XW)({gameStage:I,cardDeck:k})}),card_deck:k.slice(2),last_street_bank:L});case 12:return e.next=14,(0,u.r7)((0,u.JU)(d.db,"game_rooms_poker/".concat(w)),{current_player_uid:r,last_actions:Object.keys(U).reduce((function(e,t){var n,a;return((null===(n=U[t])||void 0===n?void 0:n.action)===x.A.fold||(null===(a=U[t])||void 0===a?void 0:a.action)===x.A.all_in||i)&&(e[t]=U[t]),e}),{}),current_bet:0,game_stage:A.H.river,game_cards:u.vr.apply(void 0,(0,n.Z)((0,b.XW)({gameStage:I,cardDeck:k}))),history_list:(0,u.vr)({uid:Z,cards:(0,b.XW)({gameStage:I,cardDeck:k})}),card_deck:k.slice(2),last_street_bank:L});case 15:return H(!0),e.abrupt("break",18);case 18:case"end":return e.stop()}}),e)}))),[k,I,w,U,H]),le=(0,o.useMemo)((function(){return(0,b.Kn)({lastActions:U,playersList:C})}),[U,C]);return(0,o.useEffect)((function(){var e;return W?le?e=setTimeout((function(){return re()}),1e3):ae&&re():le&&I===A.H.river?e=setTimeout((function(){return H(!0)}),1e3):ae&&I===A.H.river&&H(!0),function(){return clearTimeout(e)}}),[I,W,ae,re,H]),(0,o.useEffect)((function(){j===Z&&Q(K+(M||50))}),[K,M,j,Z]),(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"game_block",children:[(0,g.jsx)(N,{gameCards:B,bankCount:L,playerDataArr:f,playersList:C,lastActions:U,uuid:Z,playerCards:y,currentPlayerUid:j,dealerUid:D}),j!==Z||5===B.length&&(0,b.tI)({lastActions:U,playersList:C})||le||null!==(t=U[Z])&&void 0!==t&&t.end?null:G?(0,g.jsxs)("div",{className:"range_block_wrapper",children:[(0,g.jsx)("button",{onClick:function(){X(!1)},children:"Back"}),(0,g.jsx)("div",{className:"range_block",children:(0,g.jsx)(_,{min:K+(M||50),max:((null===(i=U[Z])||void 0===i?void 0:i.number)||0)+q,addedMax:M-(((null===(v=U[Z])||void 0===v?void 0:v.number)||0)+q)%M,step:M||"50",value:z,setValue:Q})}),(0,g.jsx)("button",{onClick:ie,children:((null===(h=U[Z])||void 0===h?void 0:h.number)||0)+q===Number(z)?"All in":0===K?"Bet":"Raise"})]}):(0,g.jsxs)("div",{className:"game_buttons_block",children:[(0,g.jsx)(m.Z,{text:"Fold",onClick:$}),(0,g.jsx)(m.Z,{text:0===K?"Check":ee?"All in":"Call (".concat(K-((null===(p=U[Z])||void 0===p?void 0:p.number)||0),")"),onClick:te}),!ee&&(Number(K)+M===Number(q)?(0,g.jsx)(m.Z,{text:"All in",onClick:ne}):(0,g.jsx)(m.Z,{text:0===K?"Bet":"Raise",onClick:function(){X(!0)}}))]}),E&&(0,g.jsx)(o.Suspense,{children:(0,g.jsx)(S,{})})]})})}}}]);