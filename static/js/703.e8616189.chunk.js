"use strict";(self.webpackChunkpoker=self.webpackChunkpoker||[]).push([[703],{703:function(n,e,r){r.r(e),r.d(e,{default:function(){return s}});var t=r(4165),i=r(5861),o=r(8391),a=r(2159),u=r(4728),c=r(2343),l=r(9277),d=r(3712),s=function(n){var e,r=n.playerDataArr,s=n.playersList,v=n.uuid,f=n.ongoingGame,p=n.dealerUid,m=n.id,g=n.isHost,h=n.setIsRenameModalOpen,_=n.setIsChangeIconModalOpen,x=n.setOpen,b=(0,o.useMemo)((function(){return r.reduce((function(n,e){return f&&!s.includes(e.uid)||(n[e.uid]=e),n}),{})}),[r,f,s]),k=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(e){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,a.r7)((0,a.JU)(u.db,"game_rooms_poker",m),{banned_player_uid:(0,a.vr)(e),player_data_arr:r.filter((function(n){return n.uid!==e}))});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),y=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(e){var i,o,c;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=r.find((function(n){return n.uid===e})),o=r.filter((function(n){return n.money>25})).map((function(n){return n.uid})),c=(0,l.uU)(o,p),(0,a.r7)((0,a.JU)(u.db,"game_rooms_poker",m),{player_data_arr:(0,a.Ab)(i),dealer_uid:i.uid===p?c:p});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),j=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(e){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,a.r7)((0,a.JU)(u.db,"game_rooms_poker/".concat(m)),{dealer_uid:e});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Z=null,w=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(e){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,a.r7)((0,a.JU)(u.db,"game_rooms_poker",m),{player_data_arr:e});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),D=function(n){n.target.style.opacity=.5,Z=n.target,n.dataTransfer.effectAllowed="move"},O=function(n){n.preventDefault(),n.dataTransfer.dropEffect="move"},C=function(n){n.target.classList.add("over")},L=function(n){n.target.classList.remove("over")},N=function(n){if(n.stopPropagation(),Z!==n.target){var e=Object.values(b).filter((function(n,e){return e.toString()!==Z.id})),r=Object.values(b)[Z.id],t=Number(n.target.id),i=[];if(t>=e.length)i=e.slice(0).concat(r),w(i),n.target.classList.remove("over");else if(t<e.length){var o=(i=e.slice(0,t).concat(r)).concat(e.slice(t));w(o),n.target.classList.remove("over")}}else console.log("nothing happened");n.target.classList.remove("over")},U=function(n){n.target.style.opacity=1};return 0===(null===(e=Object.values(b))||void 0===e?void 0:e.length)?null:(0,d.jsxs)("div",{className:"menu_users_block",children:[(0,d.jsx)("h4",{children:"Players"}),(0,d.jsx)("div",{className:"custom_scrollbar container",children:Object.values(b).map((function(n,e){return(0,d.jsxs)("div",{className:"player_item ".concat(g&&!f?"dnd-list":""," ").concat((null===n||void 0===n?void 0:n.uid)===v?"current":""),draggable:g&&!f,onDragStart:D,onDragOver:O,onDragEnter:C,onDragLeave:L,onDrop:N,onDragEnd:U,id:e,children:[(0,d.jsx)("img",{src:null===c.Z||void 0===c.Z?void 0:c.Z[null===n||void 0===n?void 0:n.icon_index],alt:"",width:"64px",height:"64px",onClick:function(){(null===n||void 0===n?void 0:n.uid)===v&&(x(!1),_(!0))}}),(0,d.jsxs)("div",{className:"info",children:[(0,d.jsx)("p",{onClick:function(){(null===n||void 0===n?void 0:n.uid)===v&&(x(!1),h(!0))},children:"".concat((null===n||void 0===n?void 0:n.username)||"").concat((null===n||void 0===n?void 0:n.uid)===v?" (You)":"")}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{children:(null===n||void 0===n?void 0:n.money)||"0"}),(null===n||void 0===n?void 0:n.uid)===p&&!g&&(0,d.jsx)("div",{className:"dealer_block",children:"D"}),g&&(0,d.jsx)("div",{className:"dealer_block ".concat((null===n||void 0===n?void 0:n.uid)===p?"":"not_dealer"),onClick:function(){return(null===n||void 0===n?void 0:n.uid)!==p&&j(null===n||void 0===n?void 0:n.uid)},children:"D"})]})]}),g&&!f&&(null===n||void 0===n?void 0:n.uid)!==v&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{type:"button",onClick:function(){return k(null===n||void 0===n?void 0:n.uid)},children:"Ban"}),(0,d.jsx)("button",{type:"button",onClick:function(){return y(null===n||void 0===n?void 0:n.uid)},children:"Out"})]})]},null===n||void 0===n?void 0:n.uid)}))})]})}}}]);